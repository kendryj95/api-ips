// Actualizar estado de compra en IPS DB
									db.ips.query(
										'UPDATE pagos SET estado_compra = ?, estado_pago = ?, payer_info_email = ?, payer_id = ?, id_compra = ? WHERE id_pago = ?', 
										[ 
											payment.transactions[0].related_resources[0].sale.state, 
											payment.state, 
											payment.transactions[0].payee.email,
											payment.transactions[0].payee.merchant_id, 
											payment.transactions[0].related_resources[0].sale.id, 
											pago.id
										], 
										function(err, resultado) {
											if (err) {
												console.log('update', resultado)
												response_paypal = {
													title: "ERROR",
													error: {
														"status": 500,
														"message": "Error while trying update on database.",
														"error_code": 29,
														"error": err
													}
												}
												return response_paypal
											} else {
												console.log('update', resultado)
											}
										}
									)

									console.log("insert smsin =========================================")
									// Guardar una nueva transaccion en Insignia Mobile Communications DB
									db.insignia.query(
										'INSERT INTO sms.smsin (id_sms, origen, sc, contenido, estado, data_arrive, time_arrive, desp_op, id_producto) VALUES (?, ?, ?, ?, ?, CURDATE(), CURTIME(), ?, ?)',
										[ 
											data_sms.id, 
											data_sms.origen, 
											data_sms.sc, 
											data_sms.contenido, 
											1, 
											'PAYPAL', 
											pago.id_producto 
										],
										function(err, insert_smsin_result) {
											if (err) {
												response_paypal = {
													title: "ERROR",
													error: {
														"status": 500,
														"message": "Error while trying insert on database",
														"error_code": 31,
														"error": err
													}
												}
												return response_paypal
											} else {
												console.log('insert smsin', insert_smsin_result)
											}
										}
									)